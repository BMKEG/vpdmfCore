<ViewDefinition Name="NeuralStimulus" Type="Data">
	<Primitives>

<!--  TOP PRIMITIVE -->

                <PrimitiveDefinition Name="NeuralStimulus" primaryFlag="TRUE">
			<Classes>
				<Class Name="SpatialPrimitive" primaryFlag="TRUE"/>
                		<Class Name="NeuralStimulus"/>
			</Classes>
			<triplets>
			        <triplet>NeuralStimulus->nStimType=NeuralStimulusType|CV</triplet>
			        <triplet>NeuralStimulus->stimAV=StimulusAtlasVolume|StimulusAtlasVolume</triplet>
            			<triplet>NeuralStimulus->expt=PhysiologyExperimentLU|PhysiologyExperiment</triplet>
			</triplets>
			<FormDesign>
				<Control Type="Lookup" Pos="1" Label="Experiment" lookupView="PhysiologyExperimentLU" attributeAddress="]PhysiologyExperimentLU|ViewTable.indexString"/>
		        	<GridArray Pos="2" Label="Neural Intervention" attributeAddress="]NeuralStimulusType">
			        	<Control Type="Lookup" Pos="2.1" Label="Type" lookupView="NeuralStimulusType" removeTerm="0" attributeAddress="]NeuralStimulusType|CV.name"/>
                                      	<Control Type="TextRegion" Pos="2.2" Label="Description" Height="3" Width="30" attributeAddress="]NeuralStimulusType|CV.description"/>
				</GridArray>
				<GridArray Pos="3" Label="Atlas Areas involved in[br]Neural Intervention" attributeAddress="]StimulusAtlasVolume">
					<Control Type="Lookup" Pos="3.1" Label="Atlas Volume" lookupView="StimAtlasVolumeLU" attributeAddress="]StimAtlasVolumeLU|ViewTable.indexString"/>
					<Control Type="Lookup" Pos="3.2" Label="Participation Relation" lookupView="ParticipationRelation" attributeAddress="]ParticipationRelation|CV.indexString"/>
					<Control Type="Lookup" Pos="3.3" Label="Hemisphere" lookupView="HemisphereRelation" attributeAddress="]HemisphereRelation|CV.indexString"/>
				</GridArray>
			</FormDesign>
		</PrimitiveDefinition>

		<PrimitiveDefinition Name="StimulusAtlasVolume">
			<Classes>
				<Class Name="StimulusAtlasVolume" primaryFlag="TRUE"/>
			</Classes>
			<triplets>
            			<triplet>StimulusAtlasVolume->stimAV=StimAtlasVolumeLU|AtlasVolume</triplet>
                		<triplet>StimulusAtlasVolume->participation=ParticipationRelation|CV</triplet>
		                <triplet>StimulusAtlasVolume->stimulusHemisphere=HemisphereRelation|CV</triplet>
			</triplets>
		</PrimitiveDefinition>

<!--  'DATA' DEPENDENT PRIMITIVES *** Physiology Experiment -->

		<PrimitiveDefinition lookupView="PhysiologyExperimentLU"/>

<!--  EDITABLE TYPES -->

                <PrimitiveDefinition Editable="1" Nullable="1" lookupView="NeuralStimulusType"/>

<!--  Neural Stimulus  -->
        	<PrimitiveDefinition Editable="0" Name="StimAtlasVolumeLU" lookupView="AtlasVolumeLU"/>
		<PrimitiveDefinition Editable="0" lookupView="ParticipationRelation"/>
        	<PrimitiveDefinition Editable="0" lookupView="HemisphereRelation"/>

	</Primitives>

<!--  Try a simple index to start with  -->

	<Index Format="$1$"/>
	<MachineIndex Format="$1$"/>
	<IndexElements>
		<IndexElement Pos="1" attributeAddress="]PhysiologyExperimentLU|PhysiologyExperiment.name"/>
		<IndexElement Pos="2" Nullable="1" attributeAddress="]NeuralStimulus|SpatialPrimitive.name"/>
	</IndexElements>

        <Parent Name="BrainVolume"/>

</ViewDefinition>
